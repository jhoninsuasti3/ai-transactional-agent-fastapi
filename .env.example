# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in the values
# DO NOT commit .env to version control!

# Application
ENV=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# OPENAI CONFIGURATION
# =============================================================================
# API Key proporcionada en el correo de la prueba t√©cnica
# CRITICAL: Limited to 100K tokens total
OPENAI_API_KEY=your-openai-api-key-here

# Modelo recomendado: gpt-4-turbo-mini (balance precio/rendimiento)
OPENAI_MODEL=gpt-4-turbo-mini
OPENAI_TEMPERATURE=0
OPENAI_MAX_TOKENS=1000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
DATABASE_URL=postgresql+asyncpg://agent_user:secure_password@localhost:5432/transactional_agent

# Para Docker Compose
POSTGRES_USER=agent_user
POSTGRES_PASSWORD=secure_password
POSTGRES_DB=transactional_agent
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# =============================================================================
# MOCK API CONFIGURATION
# =============================================================================
# URL del Mock API de transacciones
MOCK_API_URL=http://mock-api:8001
MOCK_API_TIMEOUT_CONNECT=5
MOCK_API_TIMEOUT_READ=10

# =============================================================================
# RESILIENCE PATTERNS CONFIGURATION
# =============================================================================
# Retry Pattern
MAX_RETRIES=3
RETRY_BACKOFF_MULTIPLIER=1
RETRY_MIN_WAIT=1
RETRY_MAX_WAIT=4

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60
CIRCUIT_BREAKER_RESET_TIMEOUT=30

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_RELOAD=true

# CORS
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=10

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Structured logging with structlog
LOG_FORMAT=json
LOG_RENDERER=console  # console | json

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
# Conversation history limits (token optimization)
MAX_MESSAGES_IN_HISTORY=10
SUMMARIZE_AFTER_MESSAGES=20

# Token monitoring
TOKEN_WARNING_THRESHOLD=50000   # 50% of 100K
TOKEN_CRITICAL_THRESHOLD=75000  # 75% of 100K
TOKEN_EMERGENCY_THRESHOLD=90000 # 90% of 100K

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
# Use test database for tests
TEST_DATABASE_URL=postgresql+asyncpg://agent_user:secure_password@localhost:5432/transactional_agent_test

# =============================================================================
# OPTIONAL: OBSERVABILITY
# =============================================================================
# Sentry (optional)
# SENTRY_DSN=your-sentry-dsn-here

# Prometheus (optional)
# PROMETHEUS_PORT=9090

# OpenTelemetry (optional)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317